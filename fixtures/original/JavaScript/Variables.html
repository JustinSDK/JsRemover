<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html dir="ltr" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Variables</title>
    <meta content="caterpillar" name="author">
    <meta content="JavaScript variable" name="keywords">
    <link href="css/std.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="header">
      <div class="hgroup">
        <h3><a href="http://openhome.cc/eGossip/">From eGossip@Openhome</a></h3>
        <h1><a href="index.html">JavaScript Essence: Variables<br>
          </a></h1>
      </div>
    </div>
    <div class="article">
      <div align="right"><a href="../../Gossip/JavaScript/Variable.html">中文</a><br>
      </div>
      <br>
      Programming languages can be classified as <strong>statically typed languages</strong> or <strong>dynamically typed languages</strong> according to type checking is performed during compile-time or runtime.<br>
      <br>
      Variables of static languages have types, such as Java, C/C++, Scala, and so on. Take Java for example:<br>
      <blockquote><b><span class="courier">int number = 10;</span><br>
          <span class="courier">String id = "caterpillar";</span></b><br>
      </blockquote>
      In the above example, the type of the variable <span class="courier">number</span> is <span
        class="courier">int</span>, and the type of <span class="courier">id</span> is <span
        class="courier">String</span>. While assigning a value to a variable, they should have a consistent type or a compiler error will happen. For example, the following code would fail to compile because types of <span
        class="courier">number</span> and <span class="courier">"caterpillar"</span> don't match.<br>
      <blockquote><b><span class="courier">int number = 10;</span><br>
          <span class="courier">number = "caterpillar";</span><br>
        </b></blockquote>
      JavaScript is a dynamic language. You don't have to declare a type while declaring a variable. Only values or objects have type information. Variables are just a handles for values or objects. For example:&nbsp; <br>
      <blockquote><strong><span class="courier">var some = 10;</span><br>
          <span class="courier">some = 'caterpillar';</span><br>
        </strong></blockquote>
      Because variables don't have type information, the value of a variable can be any type. The type information of variables is only known at runtime through the referred objects and then the execution environment knows whether they have the required methods. <br>
      <br>
      Variables of static languages have type information. The greatest advantage of this feature is a compiler can check whether the type of a variable corresponds with the type of the assigned value. A lot of type mismatch errors can be caught at compile time. Dynamic languages, oppositely, can only discover type mismatch errors at runtime. Type checking at compiler time is the place where static languages are superior to dynamic languages.<br>
      <br>
      Most static languages, however, require a type declaration while declaring a variable. This will result in tedious syntax easily. Take Java for example. If you want to store objects of different types in an array, an example is as follows:<br>
      <blockquote><strong><span class="courier">Object[] objects = {"caterpillar", new Integer(100), new Date()};</span><br>
          <span class="courier">String name = (String) objects[0];</span><br>
          <span class="courier">Integer score = (Integer) objects[1];</span><br>
          <span class="courier">Data time = (Date) objects[2];</span><br>
        </strong></blockquote>
      As for JavaScript, it needs relatively brief code to achieve the same goal. For example:&nbsp; <br>
      <blockquote><strong><span class="courier">var objects = ['caterpillar', 100, new Date()];</span><br>
          <span class="courier">var name = objects[0];</span><br>
          <span class="courier">var score = objects[1];</span><br>
          <span class="courier">var time = objects[2];</span></strong><br>
      </blockquote>
      As far as coding speed is concerned, dynamic languages really have advantages compared with static languages.<br>
      <br>
      Go back to the discussion of JavaScript variable declarations. To declare a variable in JavaScript, you can use <span
        class="courier">var</span>. This has been seen previously. In fact, you can also declare variables without <span
        class="courier">var</span>, just specify a value to a variable name directly. The variable scope will be <strong>global</strong>. That's to say the value of the variable can be changed anywhere in the code, even in other functions. In fact, a variable without <span
        class="courier">var</span> creates a property on the global object. For example: <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; some = 10;</strong><br>
              10<br>
              <strong>js&gt; some;</strong><br>
              10<br>
              <strong>js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      &nbsp; <br>
      This is convenient but dangerous because it creates a property on the global object. The global object in a browser is the <span
        class="courier">window</span> object. In Rhino Shell, you can also use <span
        class="courier">this</span> to retrieve the global object. For example: <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; this.some;<br>
              </strong>10<strong><br>
                js&gt; this;<br>
              </strong>[Object global]<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      &nbsp; <br>
      Variables declared by <span class="courier">var</span> are available within the defined scope. Variables declared without <span
        class="courier">var</span> are properties of the global object, commonly known as the global scope. In the beginning, you can understand this concept as the following, if you write:<br>
      <blockquote><strong><span class="courier">some = 10;</span></strong><br>
      </blockquote>
      You can imagine the interpreter will treat this statement as:<br>
      <blockquote><strong><span class="courier"> this.some = 10;</span></strong><br>
      </blockquote>
      For example, you can observe the difference between the following two variables, declared with and without <span
        class="courier">var</span> in the function <span class="courier">func</span>:<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; function func() {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var x = 10;<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; y = 20;<br>
                &nbsp; &gt; }<br>
                js&gt; func();<br>
                js&gt; x;<br>
              </strong>js: "&lt;stdin&gt;", line 12: uncaught JavaScript runtime exception: ReferenceError: "x" is not defined.<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:12<br>
              <strong><br>
                js&gt; y;<br>
              </strong>20<strong><br>
                js&gt; this.y;<br>
              </strong>20<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      &nbsp; <br>
      The variable <span class="courier">x</span> is declared by <span
        class="courier">var</span> so it's not available outside the function. The variable <span
        class="courier">y</span> is declared without <span class="courier">var</span> so it's a property of the global object. That's why it's available from anywhere in the code.<br>
      <br>
      If you use <span class="courier">var</span> to declare a variable outside of any function, it's equivalent to create a property on the global object. For example: <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var x = 10;<br>
                js&gt; this.x;<br>
              </strong>10<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      &nbsp; <br>
      Local variables will temporarily shadow global variables if they have the same name. <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var x = 10;<br>
                js&gt; function func() {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var x = 20;<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(x);<br>
                &nbsp; &gt; }<br>
                js&gt; func();<br>
              </strong>20<strong><br>
                js&gt; print(x);<br>
              </strong>10<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      &nbsp; <br>
      You can use <span class="courier">delete</span> to delete properties on objects. Because variables declared without <span
        class="courier">var</span> are properties of the global object. To some extent, using <span
        class="courier">delete</span> to delete variables declared without <span
        class="courier">var</span> is so-called deleting variables. For example: <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; a = 20;<br>
              </strong>20<strong><br>
                js&gt; delete a;<br>
              </strong>true<strong><br>
                js&gt; a<br>
              </strong>js: "&lt;stdin&gt;", line 7: uncaught JavaScript runtime exception: ReferenceError: "a" is not defined.<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:7<strong><br>
                js&gt; this.a;<br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      Note the above example, <span class="courier">this.a</span> will be <span
        class="courier">undefined</span>. Rhino shell, however, shows nothing for <span
        class="courier">undefined</span>. The <span class="courier">delete</span> operator returns <span
        class="courier">true</span> if it deletes a variable successfully and <span
        class="courier">false</span> if it fails. A variable declared by <span
        class="courier">var</span> cannot be deleted. For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var b = 10;<br>
                js&gt; delete b;<br>
              </strong>false<strong><br>
                js&gt; <br>
              </strong></td>
          </tr>
        </tbody>
      </table>
      <br>
      You can use <span class="courier">var</span> to repeat declaring the same variable, but don't overwrite the original value of the variable. For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var x = 10;<br>
                js&gt; var x;<br>
                js&gt; x<br>
              </strong>10<strong><br>
              </strong></td>
          </tr>
        </tbody>
      </table>
      <br>
      It should be noted that, if a variable is declared by <span class="courier">var</span> in a function, it is available from anywhere of the function. <strong>There's no so-called block scope.</strong> For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; function func() {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; if(true) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var x = 10;<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; return x;<br>
                &nbsp; &gt; }<br>
                js&gt; func();<br>
              </strong>10<strong><br>
                js&gt;</strong><strong><br>
              </strong></td>
          </tr>
        </tbody>
      </table>
      <br>
      Variables declared by <span class="courier">var</span> is available in the entire function. This will produce amazing results. The following example will get an interpreter error as expected.<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; function func() {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(m);<br>
                &nbsp; &gt; }<br>
                js&gt; func();<br>
              </strong>js: "&lt;stdin&gt;", line 210: uncaught JavaScript runtime exception: ReferenceError:<br>
              "m" is not defined.<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:210 (func)<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:210<strong><br>
                <br>
                js&gt;</strong><strong></strong><strong><br>
              </strong></td>
          </tr>
        </tbody>
      </table>
      <br>
      But the following example has no error:<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; function func() {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(m);<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var m = 10;<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(m);<br>
                &nbsp; &gt; }<br>
                js&gt; func();<br>
              </strong>undefined<br>
              10<br>
              <strong>js&gt;</strong><strong><br>
              </strong></td>
          </tr>
        </tbody>
      </table>
      <br>
      All variables declared by <span class="courier">var</span> are visible throughout the entire block of the function so, in the previous example, the variable <span
        class="courier">m</span> is available in the first statement of <span
        class="courier">func</span>, but the value <span class="courier"></span> is <span
        class="courier">undefined</span>.<br>
      <br>
      Take a look at <a href="ScopeChains.html">Scope chains</a> if you are interested. The article talks about that&nbsp;<span
        class="courier"></span>variables declared by <span class="courier">var</span> are properties of <b>call objects</b> in the execution context where code is executed, so there's no so-called block scope.<br>
      <br>
      <br>
      <p></p>
      <p></p>
      <ul>
      </ul>
    </div>
    <div class="aside">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script> <br>
      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script> <br>
      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script> <br>
      <br>
      <br>
    </div>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script> <script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script> </body>
</html>
