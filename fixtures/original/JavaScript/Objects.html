<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html dir="ltr" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Objects</title>
    <meta content="caterpillar" name="author">
    <meta content="JavaScript object" name="keywords">
    <link href="css/std.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="header">
      <div class="hgroup">
        <h3><a href="http://openhome.cc/eGossip/">From eGossip@Openhome</a></h3>
        <h1><a href="index.html">JavaScript Essence: Objects<br>
          </a></h1>
      </div>
    </div>
    <div class="article">
      <div align="right"><a href="../../Gossip/JavaScript/Object.html">中文</a><br>
      </div>
      <br>
      In JavaScript, an object is an instance of <span class="courier">Object</span>. You can create a new object as follows: <br>
      <blockquote><strong><span class="courier">var obj = new Object();</span></strong><br>
      </blockquote>
      In fact, real JavaScript developers rarely do so now. You can just create an object by an object literal. <br>
      <blockquote><strong><span class="courier">var obj = {};</span></strong><br>
      </blockquote>
      Both of them create an instance of <span class="courier">Object</span> but the object literal is apparently more efficient. In JavaScript, you can add properties on an object at any time. You can use the <b><span
          class="courier">delete</span></b> operator to delete properties. For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {};</strong><br>
              <strong>js&gt; obj.x = 10;</strong><br>
              10<br>
              <strong>js&gt; delete obj.x;</strong><br>
              true<br>
              <strong>js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      If it's deleted successfully, <span class="courier">delete</span> returns <span
        class="courier">true</span>. Not all properties can be deleted. Some built-in properties cannot be deleted, such as properties provided by browsers. Incidentally, <span
        class="courier">delete</span> returns <span class="courier">true</span> if it's used to delete a value. For example, <span
        class="courier">delete</span> 1 will return <span class="courier">true</span>.<br>
      &nbsp;<br>
      If you have known properties of an object, you can use one object literal create an object and properties at the same time. For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; x : 10,<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; y : 20<br>
                &nbsp; &gt; };<br>
                js&gt; obj.x;<br>
              </strong>10<strong><br>
                js&gt; obj.y;<br>
              </strong>20<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      You can use <span class="courier">for in</span> to iterate user-defined properties of an object. The <span
        class="courier">for in</span> can iterate each property name. For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; for(var prop in obj) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(prop);<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(typeof prop);<br>
                &nbsp; &gt; }<br>
              </strong>x<br>
              string<br>
              y<br>
              string<strong><br>
                js&gt; 'x' in obj;<br>
              </strong>true<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      You can also see that every property name is actually a <span class="courier">string</span> value. This also shows that if you use the <span
        class="courier">in</span> operator to test a property, you should use a <span
        class="courier">string</span> value.<br>
      <br>
      In fact, the dot operator (<span class="courier">.</span>) is just one of the ways to access properties of an object. You can also use the <span
        class="courier">[]</span> operator to access them. For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {};<br>
                js&gt; obj['x'] = 10;<br>
              </strong>10<strong><br>
                js&gt; obj.x;<br>
              </strong>10<strong><br>
                js&gt; obj['x'];<br>
              </strong>10<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      A JavaScript object, basically, is actually a collection of properties and a property is associated with a value. Take something for comparison; it's like a <span
        class="courier">Map</span> object in Java or a <span class="courier">dict</span> in Python. If you want to use <span
        class="courier">for in</span> to iterate all properties and values of an object, as follows:<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; x : 10,<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; y : 20<br>
                &nbsp; &gt; };<br>
                js&gt; for(var prop in obj) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(prop + ': ' + obj[prop])<br>
                &nbsp; &gt; }<br>
              </strong>x: 10<br>
              y: 20<strong><br>
                js&gt;</strong><strong></strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      One of the occasions to use the <span class="courier">[]</span> operator is your properties include characters such as a space, dot (<span
        class="courier">.</span>), and so on. For example:<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; 'caterpillar.onlyfun' : 'Openhome'<br>
                &nbsp; &gt; };<br>
                js&gt; obj.caterpillar.onlyfun;<br>
              </strong>js: "&lt;stdin&gt;", line 136: uncaught JavaScript runtime exception: TypeError: Cannot read property "onlyfun" from undefined<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:136<strong><br>
                <br>
                js&gt; obj['caterpillar.onlyfun'];<br>
              </strong>Openhome<strong><br>
                js&gt; delete obj['caterpillar.onlyfun'];<br>
              </strong>true<strong><br>
                js&gt; 'caterpillar.onlyfun' in obj;<br>
              </strong>false<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      In addition to using <span class="courier">in</span> to test the existence of properties, there's another way to do so. You get <span
        class="courier">undefined</span> if you access a property which doesn't exist and <span
        class="courier">undefined</span> will be treated as false in conditional statements or expressions, so you have the way so-called <strong>'feature detection'</strong>. <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {};<br>
                js&gt; if(obj.x) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print('x exists.' );<br>
                &nbsp; &gt; }<br>
                js&gt; obj.x = 10;<br>
              </strong>10<strong><br>
                js&gt; if(obj.x) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print('x exists.' );<br>
                &nbsp; &gt; }<br>
              </strong>x exists.<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      The concept of feature detection can also be combined with <span
        class="courier">||</span> to merge object's properties. For example:<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; x : 10,<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; y : 20<br>
                &nbsp; &gt; };<br>
                js&gt; var option = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; x : obj.x || 1,<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; y : obj.y || 2,<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; z : obj.z || 3<br>
                &nbsp; &gt; };<br>
                js&gt; option.x;<br>
              </strong>10<strong><br>
                js&gt; option.y;<br>
              </strong>20<strong><br>
                js&gt; option.z;<br>
              </strong>3<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      In the above example, <span class="courier">x</span>, <span class="courier">y</span> and <span
        class="courier">z</span> of <span class="courier">option</span> have default values <span
        class="courier">1, 2</span> and <span class="courier">3</span> respectively. If there are corresponding properties on <span
        class="courier">obj</span>, <span class="courier">x</span>, <span
        class="courier">y</span> and <span class="courier">z</span> <span
        class="courier">of</span> <span class="courier">option</span> will be assigned the corresponding property values of <span
        class="courier">obj</span>. This way is also used in functions that have too many parameters and need default values. You will see more while talking about functions afterward. If you don't know why the <span
        class="courier">||</span> operator has the above result, take a look at <a
        href="Operators.html">Operators</a> for details.<br>
      <br>
      JavaScript is a weakly typed language. The <span class="courier">valueOf</span> method will be called if JavaScript needs to convert an object to a number. For example:&nbsp; <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var obj = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; valueOf : function() {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 100;<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp; &gt; };<br>
                js&gt; 100 + obj;<br>
              </strong>200<strong><br>
                js&gt; obj + 200;<br>
              </strong>300<strong><br>
                js&gt; obj &gt; 100;<br>
              </strong>false<strong><br>
                js&gt; obj &gt;= 100;<br>
              </strong>true<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      The <span class="courier">toString</span> method will be called if it needs to convert an object to a string. For example:<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var caterpillar = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; name : 'Justin Lin',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; url&nbsp; : 'openhome.cc',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; toString : function() {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return '[name: ' + this.name + ', url: ' + this.url + ']';<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp; &gt; };<br>
                js&gt; caterpillar;<br>
              </strong>[name: Justin Lin, url: openhome.cc]<strong><br>
                js&gt; 'My info: ' + caterpillar;<br>
              </strong>My info: [name: Justin Lin, url: openhome.cc]<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      In the above example, <span class="courier">this</span> refers to the object referred by <span
        class="courier">caterpillar</span>. I'll explain what <span class="courier">this</span> is afterward. <br>
      <br>
      In JavaScript, <span class="courier">==</span> and <span class="courier">===</span> are used to compare two references if they are used on objects. They don't compare their inner states. If you want to compare inner states of objects, you should define your own method. The method name is not standardized. For example, you may define an <span
        class="courier">equals</span> method:<br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; var man1 = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; name : 'Justin Lin',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; url&nbsp; : 'openhome.cc',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; equals : function(other) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return (this.name == other.name) &amp;&amp;&nbsp; (this.url == other.url);<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp; &gt; };<br>
                js&gt; var man2 = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; name : 'Justin Lin',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; url&nbsp; : 'openhome.cc',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; equals : function(other) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return (this.name == other.name) &amp;&amp;&nbsp; (this.url == other.url);<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
                &nbsp; &gt; };<br>
                js&gt; man1 == man2;<br>
              </strong>false<strong><br>
                js&gt; man1 === man2;<br>
              </strong>false<strong><br>
                js&gt; man1.equals(man2);<br>
              </strong>true<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      In the above example, the <span class="courier">equals</span> code is duplicated. If you know a function in JavaScript is an object, you can modify them as follows: <br>
      <table class="cmd">
        <tbody>
          <tr>
            <td><strong>js&gt; function equals(other) {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; return (this.name == other.name) &amp;&amp;&nbsp; (this.url == other.url);<br>
                &nbsp; &gt; }<br>
                js&gt; var man1 = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; name : 'Justin Lin',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; url&nbsp; : 'openhome.cc',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; equals : equals<br>
                &nbsp; &gt; };<br>
                js&gt; var man2 = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; name : 'Justin Lin',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; url&nbsp; : 'openhome.cc',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; equals : equals<br>
                &nbsp; &gt; };<br>
                js&gt; var man3 = {<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; name : 'caterpillar',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; url&nbsp; : 'caterpillar.onlyfun.net',<br>
                &nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; equals : equals<br>
                &nbsp; &gt; };<br>
                js&gt; man1.equals(man2);<br>
              </strong>true<strong><br>
                js&gt; man1.equals(man3);<br>
              </strong>false<strong><br>
                js&gt;</strong><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      Something about functions will be elaborated afterward.<br>
      <br>
      <br>
      <p></p>
      <p></p>
      <ul>
      </ul>
    </div>
    <div class="aside">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script> <br>
      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script> <br>
      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script> <br>
      <br>
      <br>
    </div>
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script> <script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script> </body>
</html>
