<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html dir="ltr" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>W3C DOM Introduction</title>
    <meta content="caterpillar" name="author">
    <meta content="JavaScript W3C DOM" name="keywords">
    <link href="css/std.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div class="header">
      <div class="hgroup">
        <h3><a href="http://openhome.cc/eGossip/">From eGossip@Openhome</a></h3>
        <h1><a href="index.html">JavaScript Essence: W3C DOM Introduction<br>
          </a></h1>
      </div>
    </div>
    <div class="article">
      <div align="right"><a href="../../Gossip/JavaScript/W3CDOM.html">中文</a><br>
      </div>
      <br>
      The World Wide Web Consortium (W3C) united browser vendors to draw up a standard object model. It's working to make all browser vendors to comply with this model to solve the problem of browser compatibility. This new model also extends the functions of dynamically manipulating documents. <br>
      <br>
      Simply put, in the DOM specification, a document contains all tag definitions and all tags are represented as objects; even a text is an object. According to the specification, these objects form a tree structure. For example:&nbsp;&nbsp; <br>
      <blockquote><strong><span class="courier">&lt;html&gt;</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp; &lt;head&gt;</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt;Openhome.cc&lt;/title&gt;</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp; &lt;/head&gt;</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp; &lt;body&gt;</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;h1&gt;Hello!World!&lt;/h1&gt;</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;a href="Gossip/index.html"&gt;Study note&lt;/a&gt;</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp; &lt;/body&gt;</span><br>
          <span class="courier">&lt;/html&gt;</span></strong><br>
      </blockquote>
      Objects used to represent elements of this HTML form the following tree structure:<br>
      <blockquote><b><span class="courier">document&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Document)</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-html&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (HTMLHtmlElement)</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-head&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (HTMLHeadElement)</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; |-title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (HTMLTitleElement)</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-Openhome.cc (Text）</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |body&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (HTMLBodyElement)</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-h1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (HTMLHeadingElement</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; |-Hello!World!&nbsp;&nbsp; (Text)</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (HTMLAnchorElement)</span><br>
          <span class="courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-Study note &nbsp;&nbsp;&nbsp;&nbsp; (Text)</span><br>
        </b></blockquote>
      Each object type (in Firefox) appears in the right side of the above structure. Notice that the <span
        class="courier">document</span> represents the entire document, not the <span
        class="courier">html</span> tag; you may use <span class="courier">document.childNodes[0]</span> to get the <span
        class="courier">html</span> element. The <span class="courier">childNodes</span> property returns a <span
        class="courier">NodeList</span> instance containing a collection of a node's child nodes. It's an array-like object. You can use an index to get the corresponding child node. The convenient <span
        class="courier">document.documentElement</span> also returns the <span
        class="courier">html</span> element. If you want to get the <span
        class="courier">body</span> element, the <span class="courier">document.body</span> is feasible too. Note that a text is also an element of the tree structure. <br>
      <br>
      Even though the <span class="courier">"HTML"</span> prefix appears in the element types above, DOM is not specifically worked out for HTML. The DOM API has two parts: one is the Core DOM API and the other is the HTML DOM API. The Core API is a neutral specification which can be implemented in any language and suitable for any XML-based document. You can find information about the Core DOM API in <a
        href="http://www.w3schools.com/dom/default.asp">XML DOM Tutorial</a>. <br>
      <br>
      The HTML API is an extension of the Core API, specialized to manipulate HTML documents. The corresponding type of each object almost has a <span
        class="courier">"HTML"</span> prefix. You can find information about the HTML DOM API in <a
        href="http://www.w3schools.com/htmldom/default.asp">HTML DOM Tutorial</a>. <br>
      <br>
      The Core API views all document content as nodes, including the document itself. Nodes are classified according to content type. <br>
      <blockquote><strong><span class="courier">Node</span><br>
          <span class="courier">&nbsp;&nbsp; | Document</span><br>
          <span class="courier">&nbsp;&nbsp; | Element</span><br>
          <span class="courier">&nbsp;&nbsp; | Text</span><br>
          <span class="courier">&nbsp;&nbsp; | Attr</span><br>
          <span class="courier">&nbsp;&nbsp; ...</span><br>
        </strong></blockquote>
      The <span class="courier">Document</span> type represents the entire document; <span
        class="courier">Element</span> - also a <span class="courier">Node</span> - represents all tags; <span
        class="courier">Text</span> - a <span class="courier">Node</span> too - represents the text. For more information about the types of Core DOM, please visit: <br>
      <ul>
        <li><a href="http://www.w3schools.com/dom/dom_nodetype.asp">http://www.w3schools.com/dom/dom_nodetype.asp</a></li>
      </ul>
      In Level 0 DOM, <span class="courier">navigator</span>, <span class="courier">location</span>, <span
        class="courier">frames</span>, <span class="courier">screen</span>, <span
        class="courier">history</span> and other browser-related objects all rest on the <span
        class="courier">window</span> object. Actually, only the <span
        class="courier">document</span> object is the document-related object which has few functions. These document-related functions are brought into the subset of the DOM specification. Since these old APIs are aimed at HTML, you cannot find them in the <span
        class="courier">Document</span> specification; they rest on the <span
        class="courier">HTMLDocument</span>, specifically defined for HTML manipulation. <br>
      <br>
      Likewise, <span class="courier">Element</span> only defines the element operations of Core DOM API so you cannot find HTML-related operations on it; they are defined on the extended types of <span
        class="courier">HTMLElement</span>, such as <span class="courier">HTMLHeadElement</span>. <br>
      <br>
      Every node has the <span class="courier">nodeName</span> and <span
        class="courier">nodeType</span> property. The former returns the node name; the later returns the constant of the node type. The returned constant is used to look up the corresponding node name. You can find the table about each node type and their respective named constant in the following link:<br>
      <ul>
        <li>&nbsp;<a href="http://www.w3schools.com/dom/dom_nodetype.asp">http://www.w3schools.com/dom/dom_nodetype.asp</a></li>
      </ul>
      To illustrate, the following uses JavaScript and W3C DOM API to list nodes and types of the document. <br>
      <ul>
        <li><a href="samples/W3CDOM-1.html">W3CDOM-1.html</a></li>
      </ul>
      <pre>&lt;html&gt;
    &lt;head&gt;
        &lt;meta content="text/html; charset=UTF-8" http-equiv="content-type"&gt;
        &lt;script type="text/javascript"&gt;
            window.onload = function() {
                var typeNames = [
                    '',
                    '[ELEMENT_NODE]',
                    '[ATTRIBUTE_NODE]',
                    '[TEXT_NODE]',
                    '[CDATA_SECTION_NODE]',
                    '[ENTITY_REFERENCE_NODE]',
                    '[ENTITY_NODE]',
                    '[PROCESSING_INSTRUCTION_NODE]',
                    '[COMMENT_NODE]',
                    '[DOCUMENT_NODE]',
                    '[DOCUMENT_TYPE_NODE]',
                    '[DOCUMENT_FRAGMENT_NODE]',
                    '[NOTATION_NODE]'
                ];
                
                function list(parent, indent) {
                    var nodes = parent.childNodes;
                    var tree = [];
                    for(var i = 0; i &lt; nodes.length; i++) {
                        tree.push(indent + nodes[i].nodeName + 
                                  typeNames[nodes[i].nodeType] + '&lt;br&gt;');
                        tree.push(list(nodes[i], '　　' + indent));
                    }
                    return tree.join('');
                }
                
                document.getElementById('console').innerHTML = 
                   'document' + typeNames[document.nodeType] + 
                   '&lt;br&gt;' + list(document, '　　');
            };
        &lt;/script&gt;
        &lt;title&gt;Openhome.cc&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello!World!&lt;/h1&gt;
        &lt;a href="http://caterpillar.onlyfun.net/eGossip/"&gt;Study note&lt;/a&gt;
        &lt;div id="console"&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;<br></pre>
      <br>
      Interestingly, the newline and indent characters are viewed as text nodes in Firefox, while not in Internet Explorer, so you will see different results in these two browsers.<br>
      <br>
      <br>
      <p></p>
      <p></p>
      <ul>
      </ul>
    </div>
    <div class="aside">
      
       <br>
      <br>
      
       <br>
      <br>
      
       <br>
      <br>
      <br>
    </div>
      </body>
</html>
